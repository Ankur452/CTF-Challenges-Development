{% extends 'base.html' %}

{% block head %} 

<!-- <script language="JavaScript">
    /**
      * Disable right-click of mouse, F12 key, and save key combinations on page
      * By Arthur Gareginyan (https://www.arthurgareginyan.com)
      * For full source code, visit https://mycyberuniverse.com
      */
    window.onload = function() {
      document.addEventListener("contextmenu", function(e){
        e.preventDefault();
      }, false);
      document.addEventListener("keydown", function(e) {
      //document.onkeydown = function(e) {
        // "I" key
        if (e.ctrlKey && e.shiftKey && e.keyCode == 73) {
          disabledEvent(e);
        }
        // "J" key
        if (e.ctrlKey && e.shiftKey && e.keyCode == 74) {
          disabledEvent(e);
        }
        // "S" key + macOS
        if (e.keyCode == 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) {
          disabledEvent(e);
        }
        // "U" key
        if (e.ctrlKey && e.keyCode == 85) {
          disabledEvent(e);
        }
        // "F12" key
        if (event.keyCode == 123) {
          disabledEvent(e);
        }
      }, false);
      function disabledEvent(e){
        if (e.stopPropagation){
          e.stopPropagation();
        } else if (window.event){
          window.event.cancelBubble = true;
        }
        e.preventDefault();
        return false;
      }
    };
  </script> -->

{% endblock %}

{% block body %} 
<br>
<br>
<h1>
    If you give <i>MOUSE</i> a <i>COOKIE</i>
</h1>
<br>
<br>
<image src="{{url_for('static',filename='images/p1.png') }}" alt="If-you-give-a-mouse-a-cookie" class=center></image>
<br>
<br>
  <!-- <div class='window'>
    <div class='overlay'></div>
    <div class='content'>
      <div class='welcome'>Hello There!</div>
      <div class='subtitle'>Welcome to CTF 2021. Before you start, please provide cookie for a mouse.</div>
      <div class='input-fields'>

        <form action="/welcome" method="post">
            <input type='text' placeholder='Cookie Name' class='input-line full-width' name='cookie-name'></input>
            <input type='text' placeholder='Cookie Value' class='input-line full-width' name='cookie-value'></input>
            <div><button class='ghost-round full-width'>Submit</button></div>
        </form>
        
      </div>
      </div>
  </div> -->

{% endblock %}

{% block script %}















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 

<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
<script type="text/javascript">

var intervalId = window.setInterval(function(){
  checkCookie();
}, 10000);

//To stop the loop use
//clearInterval(intervalId) 

function getCookie(cname) {
  // let res = ('; '+document.cookie).split('; '+cname+'=').pop().split('=')[1].split(';')[0];
  const str = '; '+cname+'=';
  let res = ('; '+document.cookie).split(str).pop().split(';')[0];
  console.log(res);
  return res;
  // let ca = document.cookie.split(';');
  // for(let i = 0; i < ca.length; i++) {
  //   let c = ca[i];
  //   while (c.charAt(0) == ' ') {
  //     c = c.substring(1);
  //   }
  //   if (c.indexOf(name) == 0) {
  //     return c.substring(name.length, c.length);
  //   }
  // }
  
}

function checkCookie() {
  let cookie_value = getCookie("to_mouse");

  if (cookie_value == "True") {
    window.location.href='/cookie-received';
    clearInterval(intervalId);
  } else {
    console.log("Try Harder")
    // window.location.href='/welcome';
    // clearInterval(intervalId);
  }
}

</script>

{% endblock %}